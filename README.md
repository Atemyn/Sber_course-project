## Описание

Фул стек приложение - справочник документов

## Структура

- `backend` - Бэкенд на java.
- `ui` - Фронтенд на react + redux.

## Подготовка

Установите:

- [node](https://nodejs.org) - front
- [openjdk](https://openjdk.java.net) 15 - java бэк
- [Docker Engine](https://docs.docker.com/engine/install/) - для запуска контейнеров Docker
- [Docker Compose](https://docs.docker.com/compose/install/) - для запуска контейнеров Docker в качестве кластера

## Запуск через Docker кластер контейнеров

В корневой папке проекта course_project необходимо ввести следующие команды:

### Запуск фронта
```
./gradlew ui:npm_run_start
```

### Запуск бэка
```
./gradlew backend:bootJar
```

### Запуск всех Docker контейнеров
```
docker-compose up
```

## Использование приложения

### Фронтовая часть приложения открывается по адресу:
```
http://localhost:9000/#/
```

### Также в отдельном контейнере развернут pgAdmin. Использовать его можно, если перейти по адресу:
```
localhost:5050/browser/
```
Для авторизации используйте e-mail admin@admin.com и пароль root

### Сделать запрос непосредственно к серверной части можно по следующему адресу:
```
http://localhost:8888/documents
```
## Работа с Kafka на примере приложения Offset Explorer:
### Для начала нужно открыть соединение. Для этого выберите:
```
File -> Add New Connection
```

### Далее во вкладке Properties нужно задать следующие настройки:
```
Zookeeper Host: localhost
Zookeeper Port: 29092
```

### Затем во вкладке Advanced нужно установить:
```
Bootstrap Servers: localhost:29092
```
После этого можно нажать кнопку Add, чтобы добавить соединение.

### Отправка документов
После отправки документа на обработку (через фронт или вручную через запрос к бэку), сообщение об этом отправляется в Kafka в топик outbox.

### Обработка документов
Для того, чтобы обработать документ и присвоить ему новый статус (валидными статусами считаются только ACCEPTED или REJECTED),
необходимо зайти в:
```
Topics -> inbox -> Partitions -> Partition 0 -> Вкладка Data
```
Далее нажать на кнопку со значком плюса (Add Message) и выбрать Add Single Message.<br />
В текстовом поле Key необходимо указать соответствующий ключ сообщениея из топика outbox.<br />
Этот ключ, к примеру, может выглядеть так:
```
0000000000000001
```
В текстовом поле Value нужно выбрать опцию From File и вставить туда путь до файла inbox_input.txt
Путь до файла inbox_input.txt из корневой папки проекта course_project
```
backend\inbox_input.txt
```
Прежде чем отправлять данное сообщение необходимо отредактировать файл inbox_input.txt. До редактирования он будет выглядеть следующим образом:
```
{
  "documentId": 7,
  "statusCode": "ACCEPTED"
}
```
Чтобы запрос отработал корректно вместо 7 напротив documentId нужно вставить номер документа, отправленного на обработку.<br />
А для поля statusCode можно установить одно из двух значений:
```
"ACCEPTED" - Принят
"REJECTED" - Отклонён
```
После этого можно нажимать на кнопку Add в OffsetExplorer и сообщение будет отправлено в топик inbox,<br />
из которого оно потом будет прочитано приложением. Вскоре после этого статус документа на фронте будет обновлён.



